# 快速开始指南

## 当前系统状态

✅ **已完成**：
- 所有代码文件已创建
- Web界面已就绪
- 系统架构完整

❌ **需要完成**：
- **必须训练模型才能使用**（检测食堂菜品需要自定义数据集）

## 重要说明

### 为什么需要训练？

1. **YOLOv8预训练模型**只能检测COCO数据集的80个类别（人、车、动物等通用物体）
2. **食堂菜品**不在预训练类别中，必须使用自己的数据集训练
3. 没有训练好的模型，系统无法识别菜品

### 当前可以做什么？

✅ **可以立即使用**：
- 启动Web服务，查看界面
- 测试系统功能
- 准备数据集

❌ **无法使用**：
- 实际检测菜品（需要训练好的模型）

## 使用步骤

### 方案一：快速体验（仅查看界面）

1. **启动Web服务**（无需模型）：
   ```bash
   python app.py
   ```
   注意：会显示警告"模型文件不存在"，但服务仍会启动

2. **访问界面**：
   打开浏览器访问：`http://localhost:5000`
   
   可以：
   - 查看界面布局
   - 上传图片（但会提示模型未加载）

### 方案二：完整使用（需要训练）

#### 第一步：准备数据集

1. **收集图片**：
   - 拍摄或收集食堂菜品图片
   - 建议每个类别至少50-100张
   - 图片要多样化（不同角度、光照、背景）

2. **标注数据**（使用LabelImg工具）：
   ```bash
   # 安装LabelImg
   pip install labelImg
   
   # 启动标注工具
   labelImg
   ```
   
   标注步骤：
   - 打开图片
   - 框选菜品区域
   - 选择类别（对应config.yaml中的dish_classes）
   - 保存为YOLO格式（.txt文件）

3. **组织数据**：
   ```
   data/
   ├── train/
   │   ├── images/
   │   │   ├── image001.jpg
   │   │   ├── image002.jpg
   │   │   └── ...
   │   └── labels/
   │       ├── image001.txt
   │       ├── image002.txt
   │       └── ...
   ├── val/
   │   ├── images/
   │   └── labels/
   └── test/
       ├── images/
       └── labels/
   ```

#### 第二步：训练模型

```bash
python train.py
```

训练时间：
- 小数据集（<500张）：约30分钟-1小时
- 中等数据集（500-2000张）：1-3小时
- 大数据集（>2000张）：3-8小时

#### 第三步：使用系统

训练完成后，模型会自动保存到 `./models/detection_model.pt`

重启Web服务：
```bash
python app.py
```

现在可以正常检测菜品了！

## 最小数据集要求

**最低要求**（仅用于测试）：
- 每个类别：10-20张图片
- 训练集：70%
- 验证集：20%
- 测试集：10%

**推荐要求**（实际使用）：
- 每个类别：50-100张图片
- 图片多样化
- 标注准确

## 快速测试（演示模式）

如果想快速看到效果，可以：

1. **使用预训练模型测试**（只能检测通用物体，不能检测菜品）：
   ```python
   # 修改 detection_model.py，使用预训练模型
   # 但这样只能检测COCO类别，不能检测菜品
   ```

2. **创建模拟数据**：
   - 使用少量图片快速测试训练流程
   - 验证系统是否正常工作

## 常见问题

### Q: 没有数据集可以先用吗？
A: 可以启动Web服务查看界面，但无法实际检测菜品。必须训练模型。

### Q: 训练需要多长时间？
A: 取决于数据集大小和硬件。小数据集（<500张）通常30分钟-1小时。

### Q: 可以用别人的数据集吗？
A: 可以，但最好使用自己食堂的图片，因为不同食堂的菜品外观可能不同。

### Q: 必须用GPU训练吗？
A: 不是必须，但GPU会快很多。CPU也可以训练，只是速度较慢。

### Q: 训练需要多少数据？
A: 最少每个类别10-20张，推荐50-100张。数据越多，效果越好。

## 下一步

1. **准备数据集**（最重要）
2. **训练模型**
3. **评估模型**：`python evaluate.py`
4. **使用系统**：`python app.py`

## 获取帮助

- 详细文档：查看 `USAGE.md`
- 系统测试：运行 `python test_system.py`
- 配置说明：查看 `config.yaml`

